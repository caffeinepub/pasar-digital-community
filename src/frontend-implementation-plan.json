{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Installable PWA support (Android/iOS) + Pasar Digital favicon/icon branding",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Ensure the app registers the existing service worker and serves a valid manifest + icons so it is installable as a PWA on Android and iOS.",
      "acceptanceCriteria": [
        "On first load in a production build, the app registers the existing service worker at `/sw.js` without console errors.",
        "In Chrome/Edge, the site meets installability checks (valid manifest, service worker controlling the page) and shows an install prompt (where supported).",
        "In iOS Safari, the app can be added via “Add to Home Screen” and launches in standalone mode using the manifest metadata/icons.",
        "No existing application routes, auth flow, or backend interactions are broken by the PWA changes."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pwa/registerServiceWorker.ts",
          "operation": "create",
          "description": "Add a small helper that registers the existing service worker at `/sw.js` only in production builds, avoids noisy console errors, and safely no-ops when Service Workers are unsupported."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Wire service worker registration into the running app (e.g., call the new `registerServiceWorker()` from a React effect) without changing any existing route paths or authentication/bootstrap logic."
        },
        {
          "path": "frontend/public/sw.js",
          "operation": "modify",
          "description": "Adjust service worker caching rules as needed for installability and correctness (e.g., ensure manifest + app icons are consistently fetchable and not served stale), without changing app routes or adding new features like push/background sync."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update favicon and platform icons so Pasar Digital logo is used consistently across browser favicon(s), Apple touch icon, and manifest icons.",
      "acceptanceCriteria": [
        "Browser tabs show the Pasar Digital logo as the favicon (at least 16x16 and 32x32 sizes).",
        "`frontend/index.html` references the generated favicon(s) and Apple touch icon from `/assets/generated/` and no longer relies on non-logo placeholders.",
        "`frontend/public/manifest.webmanifest` icons point to generated logo-based icons and remain valid JSON.",
        "Generated icons are stored as static assets under `frontend/public/assets/generated/` and are referenced directly by the frontend (not routed through the backend)."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/favicon.dim_32x32.png",
          "operation": "create",
          "description": "Add the generated Pasar Digital logo favicon asset at `frontend/public/assets/generated/favicon.dim_32x32.png`."
        },
        {
          "path": "frontend/public/assets/generated/favicon.dim_16x16.png",
          "operation": "create",
          "description": "Add the generated Pasar Digital logo favicon asset at `frontend/public/assets/generated/favicon.dim_16x16.png`."
        },
        {
          "path": "frontend/public/assets/generated/apple-touch-icon.dim_180x180.png",
          "operation": "create",
          "description": "Ensure the generated Apple touch icon exists at `frontend/public/assets/generated/apple-touch-icon.dim_180x180.png` (add/replace as needed to use the Pasar Digital logo)."
        },
        {
          "path": "frontend/public/assets/generated/pwa-icon.dim_192x192.png",
          "operation": "create",
          "description": "Ensure the generated PWA icon exists at `frontend/public/assets/generated/pwa-icon.dim_192x192.png` (add/replace as needed to use the Pasar Digital logo)."
        },
        {
          "path": "frontend/public/assets/generated/pwa-icon.dim_512x512.png",
          "operation": "create",
          "description": "Ensure the generated PWA icon exists at `frontend/public/assets/generated/pwa-icon.dim_512x512.png` (add/replace as needed to use the Pasar Digital logo)."
        },
        {
          "path": "frontend/public/assets/generated/pwa-maskable.dim_512x512.png",
          "operation": "create",
          "description": "Ensure the generated maskable PWA icon exists at `frontend/public/assets/generated/pwa-maskable.dim_512x512.png` (add/replace as needed to use the Pasar Digital logo)."
        },
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Update favicon + Apple touch icon `<link>` tags to reference the generated logo assets from `frontend/public/assets/generated/` (specifically: `frontend/public/assets/generated/favicon.dim_16x16.png`, `frontend/public/assets/generated/favicon.dim_32x32.png`, and `frontend/public/assets/generated/apple-touch-icon.dim_180x180.png`) while keeping the existing manifest link intact."
        },
        {
          "path": "frontend/public/manifest.webmanifest",
          "operation": "modify",
          "description": "Verify/adjust manifest icon entries to point to the generated logo-based icons (including `frontend/public/assets/generated/pwa-icon.dim_192x192.png`, `frontend/public/assets/generated/pwa-icon.dim_512x512.png`, `frontend/public/assets/generated/pwa-maskable.dim_512x512.png`) and keep the manifest valid JSON."
        },
        {
          "path": "frontend/public/sw.js",
          "operation": "modify",
          "description": "Update the service worker allow/deny caching lists so favicon/manifest/icon files (including `frontend/public/assets/generated/favicon.dim_16x16.png` and `frontend/public/assets/generated/favicon.dim_32x32.png`) are always served correctly and do not get stuck with stale cached versions."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Document a minimal manual verification checklist for PWA installability (Android Chrome + iOS Safari) in CHANGELOG.md without changing app behavior.",
      "acceptanceCriteria": [
        "CHANGELOG.md includes an entry documenting PWA enablement and the manual install verification steps for Android and iOS.",
        "No protected route paths are changed as part of this update."
      ],
      "file_operations": [
        {
          "path": "frontend/CHANGELOG.md",
          "operation": "modify",
          "description": "Add a new changelog entry (English) describing PWA enablement, plus a short manual install verification checklist for Android Chrome and iOS Safari, explicitly noting that route paths were not changed."
        }
      ]
    }
  ]
}
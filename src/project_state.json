{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Vehicle registration/status app: users can register vehicles, view 'Check Vehicle Status', and manage vehicles in 'My Vehicles' (frontend React). Current focus is fixing 'My Vehicles' not showing registered vehicles and fixing ownership release errors, then producing a build.",
  "architectural_notes": [
    "Frontend (React) 'My Vehicles' must derive ownership using the authenticated Principal identity and match the backend ownerId format.",
    "After vehicle registration and ownership changes, React Query cache should be invalidated/refetched to avoid stale data."
  ],
  "known_issues": [
    "Registered vehicle appears in 'Check Vehicle Status' but not in 'My Vehicles' (ownership filter/Principal mismatch or stale cache).",
    "Error occurs when attempting to release/remove vehicle ownership (ownerId mismatch between frontend/backend)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-fix-the-my-vehicles-list-so-that-vehicles-registered-by-the-currently-signed-in-internet-identity-principal-reliably-appear-in-the-my-vehicles-page-and-related-pages-that-reuse-the-same-query-without-requiring-a-manual-refresh",
      "title": "Fix the “My Vehicles” list so that vehicles registered by the currently signed-in Internet Identity principal reliably appear in the “My Vehicles” page (and related pages that reuse the same query), without requiring a manual refresh.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-react-query-cache-invalidation-refetch-behavior-is-correct-for-the-vehicle-workflows-so-ui-state-updates-immediately-after-successful-vehicle-registration-and-after-successful-ownership-revocation",
      "title": "Ensure React Query cache invalidation/refetch behavior is correct for the vehicle workflows so UI state updates immediately after successful vehicle registration and after successful ownership revocation.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-ownership-revocation-lepas-revoke-flow-so-that-it-no-longer-fails-due-to-mismatched-identifiers-or-misleading-generic-errors-display-clear-english-error-messages-when-revocation-fails",
      "title": "Fix the ownership revocation (“lepas” / revoke) flow so that it no longer fails due to mismatched identifiers or misleading generic errors; display clear English error messages when revocation fails.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-produce-and-publish-a-new-build-after-implementing-the-requested-fixes-ensuring-the-app-passes-existing-quality-gates-and-does-not-modify-unrelated-working-features",
      "title": "Produce and publish a new build after implementing the requested fixes, ensuring the app passes existing quality gates and does not modify unrelated working features.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Fix 'My Vehicles' list not showing registered vehicles due to incorrect owner/Principal filtering",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-2",
      "summary": "Fix error when releasing/removing vehicle ownership; ensure ownerId stored/read consistently",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-3",
      "summary": "Invalidate/refresh React Query cache after vehicle registration so lists update correctly",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-4",
      "summary": "Produce a new build after the above fixes are implemented",
      "reqIds": [],
      "status": "in_progress"
    }
  ],
  "projectName": "Pasar Digital",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}
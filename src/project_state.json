{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 25,
  "summary": "Aplikasi “Pasar Digital Community” untuk pencegahan pencurian kendaraan berbasis Principal ID (tanpa server tradisional), dengan registrasi kendaraan, pelepasan/transfer kepemilikan memakai PIN, sistem undangan berbayar via token/link sekali pakai yang dibuat admin (dengan tabel status pemakaian), modul laporan kendaraan hilang–ditemukan dan notifikasi, branding logo di splash/seluruh aplikasi, halaman “Tentang Aplikasi” berisi kontak admin, serta target responsif + PWA installable (Android/iOS).",
  "architectural_notes": [
    "Aplikasi ditargetkan berjalan tanpa server tradisional (mis. canister di Internet Computer); Principal ID digunakan sebagai identifier kriptografis pengguna.",
    "Operasional jangka panjang bergantung pada ketersediaan cycles (biaya komputasi/penyimpanan).",
    "Targetkan UI responsif lintas perangkat dan dukung PWA (installable) agar dapat digunakan di Android & iOS.",
    "Perlu mekanisme bootstrap admin: menetapkan Principal tertentu (mis. user pertama atau daftar allowlist) sebagai admin agar menu Admin/Dashboard muncul.",
    "Profil pengguna perlu memiliki entry point UI yang jelas (mis. menu akun di pojok kanan atas) agar dapat diakses setelah login.",
    "Halaman Profil perlu menampilkan Principal ID (Internet Identity) pengguna (read-only) sebagai identitas kriptografis yang bisa disalin/dirujuk.",
    "Sediakan aksi Logout di halaman Profil (selain/atau menggantikan lokasi logout lain) agar mudah ditemukan pengguna.",
    "Versi 4 mengalami risiko deadlock UI bila AuthGate/AppLayout bergantung pada userProfile.onboarded/role check sebelum data profil tersedia; perlu fallback render/login agar aplikasi tidak stuck di state initializing.",
    "Tambahkan mekanisme admin permanen berbasis allowlist Principal ID (mis. set hardcoded/config) untuk memastikan admin tertentu selalu dikenali sebagai admin.",
    "Jika backend canister berstatus \"stopped\" dan Caffeine tidak menyediakan tombol manual untuk start, recovery yang tersedia bagi user adalah rebuild/redeploy versi baru agar canister otomatis restart."
  ],
  "known_issues": [
    "Build/deploy gagal karena 'System configuration error. Please report this issue to the Caffeine team.'",
    "Menu Admin/Dashboard tidak muncul karena akun/Principal belum ditetapkan sebagai admin (bootstrap admin belum berjalan/terkonfigurasi).",
    "Menu/halaman Profil Pengguna tidak muncul di navigasi (belum ada entry point UI meski fitur profil direncanakan).",
    "Setelah deploy Version 3, menu Admin/Dashboard dan entry point Profil Pengguna masih belum muncul untuk pengguna; perlu perbaikan UI/role-check dan/atau reset flow klaim admin.",
    "Aplikasi stuck loading (layar hitam “Loading…”) saat membuka link awal setelah rilis Version 4; diduga terkait flow AuthGate/AppLayout + profile/role check yang menunggu data tidak pernah ter-resolve.",
    "Halaman Profil tidak menampilkan tombol/form Edit sehingga profil tidak bisa diisi/diupdate.",
    "Flow klaim 'first admin' tidak muncul sama sekali di UI (bootstrap admin tidak tersedia untuk user).",
    "Dashboard Admin masih belum muncul dan fitur pengguna belum bisa digunakan meski sudah login (termasuk saat memakai Principal yang sudah diberikan/di-allowlist); terdapat error di browser console.",
    "Aplikasi blank/error karena backend canister berstatus \"stopped\"; panggilan frontend (mis. `getCallerUserRole`) gagal dengan IC0508 (CallContextManager tidak ada).",
    "Build attempt failed due to Caffeine internal error: “Unexpected AI error occurred. We're looking into it.” (not an app runtime error)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-implement-internet-identity-principal-based-authentication-and-gate-all-app-features-behind-sign-in",
      "title": "Implement Internet Identity (Principal-based) authentication and gate all app features behind sign-in.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-invite-only-onboarding-users-can-only-complete-initial-profile-setup-after-providing-a-valid-unused-invitation-token-generated-by-an-admin",
      "title": "Add invite-only onboarding: users can only complete initial profile setup after providing a valid, unused invitation token generated by an admin.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-user-profile-model-linked-to-principal-that-stores-full-name-email-city-country-allow-users-to-view-update-their-profile-after-onboarding",
      "title": "Create a user profile model linked to Principal that stores: full name, email, city, country; allow users to view/update their profile after onboarding.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-vehicle-registration-tied-to-the-owner-principal-storing-engine-number-chassis-number-brand-type-model-year-vehicle-location-and-vehicle-photo",
      "title": "Implement vehicle registration tied to the owner Principal, storing: engine number, chassis number, brand, type/model, year, vehicle location, and vehicle photo.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-per-user-or-per-vehicle-pin-setup-and-verification-flow-require-correct-pin-entry-to-initiate-ownership-release-transfer-actions",
      "title": "Add a per-user (or per-vehicle) PIN setup and verification flow; require correct PIN entry to initiate ownership release/transfer actions.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-ownership-release-transfer-workflow-the-current-owner-initiates-a-transfer-after-pin-verification-producing-a-transfer-code-link-that-the-new-owner-can-accept-to-become-the-new-owner",
      "title": "Implement ownership release/transfer workflow: the current owner initiates a transfer (after PIN verification), producing a transfer code/link that the new owner can accept to become the new owner.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-lost-vehicle-reporting-an-owner-can-mark-one-of-their-vehicles-as-stolen-lost-with-a-report-note-all-authenticated-users-can-browse-search-the-lost-list-to-deter-resale-of-stolen-vehicles",
      "title": "Implement lost-vehicle reporting: an owner can mark one of their vehicles as stolen/lost with a report note; all authenticated users can browse/search the lost list to deter resale of stolen vehicles.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-found-vehicle-reporting-and-in-app-notifications-any-authenticated-user-can-report-a-lost-vehicle-as-found-the-vehicle-owner-receives-an-in-app-notification-and-can-view-the-found-details",
      "title": "Implement found-vehicle reporting and in-app notifications: any authenticated user can report a lost vehicle as found; the vehicle owner receives an in-app notification and can view the found details.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-role-and-admin-dashboard-with-system-stats-and-reports-total-vehicles-registered-total-lost-reports-and-invitation-token-issuance-usage-report",
      "title": "Add an admin role and admin dashboard with system stats and reports: total vehicles registered, total lost reports, and invitation token issuance/usage report.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-the-provided-app-logo-into-the-ui-add-it-as-a-static-asset-and-use-it-in-the-app-header-and-on-the-sign-in-onboarding-screens",
      "title": "Integrate the provided app logo into the UI: add it as a static asset and use it in the app header and on the sign-in/onboarding screens.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-choose-and-apply-a-coherent-visual-theme-colors-typography-spacing-layout-appropriate-for-a-security-registry-app-and-use-it-consistently-across-all-pages-avoid-blue-purple-palettes",
      "title": "Choose and apply a coherent visual theme (colors, typography, spacing, layout) appropriate for a security/registry app and use it consistently across all pages (avoid blue/purple palettes).",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-add-the-uploaded-pasar-digital-community-logo-image-to-the-frontend-static-assets-and-ensure-it-renders-correctly-wherever-the-app-uses-the-logo-sign-in-screen-onboarding-and-the-in-app-header",
      "title": "Add the uploaded Pasar Digital Community logo image to the frontend static assets and ensure it renders correctly wherever the app uses the logo (sign-in screen, onboarding, and the in-app header).",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-features-are-discoverable-and-accessible-for-an-admin-user-the-admin-entry-point-must-appear-in-navigation-when-the-signed-in-principal-is-an-admin-and-the-admin-dashboard-must-be-reachable",
      "title": "Ensure the Admin features are discoverable and accessible for an admin user: the Admin entry point must appear in navigation when the signed-in principal is an admin, and the Admin Dashboard must be reachable.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-invite-token-management-fully-functional-end-to-end-admin-can-generate-an-invitation-token-and-see-a-table-split-into-unused-and-used-tokens-with-a-one-click-copy-of-an-onboarding-link-for-unused-tokens",
      "title": "Make the Admin invite-token management fully functional end-to-end: admin can generate an invitation token and see a table split into unused and used tokens, with a one-click copy of an onboarding link for unused tokens.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-about-page-that-includes-a-brief-description-and-the-provided-admin-contact-details-whatsapp-089502436075-and-email-pasardigital-ina-gmail-com-link-to-it-from-within-the-app-ui-footer-and-or-user-menu",
      "title": "Add an \"About\" page that includes a brief description and the provided admin contact details: WhatsApp 089502436075 and email pasardigital.ina@gmail.com; link to it from within the app UI (footer and/or user menu).",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-pwa-support-so-the-app-is-installable-on-android-and-ios-add-to-home-screen-including-a-web-app-manifest-and-required-icons-metadata",
      "title": "Add PWA support so the app is installable on Android and iOS (Add to Home Screen), including a web app manifest and required icons/metadata.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-core-layouts-sign-in-dashboard-admin-pages-token-tables-are-mobile-friendly-and-usable-on-small-screens-no-horizontal-overflow-tables-remain-readable-via-responsive-patterns",
      "title": "Ensure core layouts (sign-in, dashboard, admin pages, token tables) are mobile-friendly and usable on small screens (no horizontal overflow, tables remain readable via responsive patterns).",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-entry-point-discoverable-after-bootstrap-by-adding-an-in-app-ui-flow-that-allows-the-first-user-to-claim-admin-when-they-are-denied-access-due-to-missing-admin-role-using-clear-english-user-facing-copy",
      "title": "Make the Admin entry point discoverable after bootstrap by adding an in-app UI flow that allows the first user to claim admin when they are denied access due to missing admin role, using clear English user-facing copy.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-user-profile-feature-end-to-end-in-the-ui-display-and-allow-the-signed-in-user-to-edit-their-profile-fields-full-name-optional-email-city-country-via-the-existing-backend-profile-apis-and-ensure-the-profile-page-is-reachable-from-the-top-right-user-menu",
      "title": "Implement the User Profile feature end-to-end in the UI: display and allow the signed-in user to edit their profile fields (full name, optional email, city, country) via the existing backend profile APIs, and ensure the Profile page is reachable from the top-right user menu.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-user-profile-data-flow-so-signed-in-users-are-not-incorrectly-forced-into-onboarding-and-so-the-profile-feature-reliably-appears-and-works-after-sign-in",
      "title": "Fix the user profile data flow so signed-in users are not incorrectly forced into onboarding, and so the Profile feature reliably appears and works after sign-in.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-logout-button-inside-the-profile-page-that-logs-the-user-out-of-internet-identity-and-clears-cached-app-state",
      "title": "Add a Logout button inside the Profile page that logs the user out of Internet Identity and clears cached app state.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-profile-page-displays-the-signed-in-user-s-internet-identity-principal-id-as-read-only-text-so-users-can-see-their-internet-id",
      "title": "Ensure the Profile page displays the signed-in user’s Internet Identity Principal ID as read-only text so users can see their Internet ID.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-robust-claim-first-admin-bootstrap-that-works-reliably-so-the-current-signed-in-user-can-claim-admin-and-then-immediately-see-the-admin-menu-and-access-the-admin-dashboard",
      "title": "Implement a robust \"claim first admin\" bootstrap that works reliably so the current signed-in user can claim admin and then immediately see the Admin menu and access the Admin Dashboard.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-navigation-entry-reliably-appear-for-admin-users-desktop-nav-and-mobile-nav-based-on-the-backend-admin-check-and-ensure-the-admin-dashboard-route-is-reachable-for-admins",
      "title": "Make the admin navigation entry reliably appear for admin users (desktop nav and mobile nav), based on the backend admin check, and ensure the Admin Dashboard route is reachable for admins.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-authentication-gate-so-the-app-never-blocks-on-profile-actor-queries-before-the-user-has-authenticated-and-so-an-unauthenticated-visitor-always-sees-the-sign-in-screen-instead-of-an-infinite-loading-screen",
      "title": "Update the authentication gate so the app never blocks on profile/actor queries before the user has authenticated, and so an unauthenticated visitor always sees the Sign In screen instead of an infinite \"Loading...\" screen.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-caller-profile-data-flow-to-use-the-real-backend-profile-api-not-placeholder-role-based-data-and-ensure-onboarding-redirects-only-happen-after-the-profile-fetch-has-definitively-completed",
      "title": "Fix the caller profile data flow to use the real backend profile API (not placeholder role-based data), and ensure onboarding redirects only happen after the profile fetch has definitively completed.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-add-resilient-error-handling-for-profile-role-checks-so-transient-backend-errors-do-not-cause-an-infinite-loading-state-show-a-recoverable-ui-state-e-g-sign-in-if-not-authenticated-or-an-error-message-with-a-retry-action-if-authenticated",
      "title": "Add resilient error handling for profile/role checks so transient backend errors do not cause an infinite loading state; show a recoverable UI state (e.g., Sign In if not authenticated, or an error message with a retry action if authenticated).",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-main-layout-applayout-does-not-hide-all-navigation-content-in-a-way-that-appears-like-a-broken-app-during-onboarding-and-immediately-after-login-the-header-may-be-hidden-on-onboarding-but-the-page-content-must-always-render",
      "title": "Ensure the main layout (AppLayout) does not hide all navigation/content in a way that appears like a broken app during onboarding and immediately after login; the header may be hidden on onboarding, but the page content must always render.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-ui-to-support-editing-and-saving-profile-fields-full-name-email-city-country-with-clear-english-user-facing-copy-using-the-real-backend-profile-apis-the-page-must-include-an-obvious-action-to-enter-edit-mode-and-to-save-cancel-changes",
      "title": "Update the Profile UI to support editing and saving profile fields (Full Name, Email, City, Country) with clear English user-facing copy, using the real backend profile APIs. The page must include an obvious action to enter edit mode and to save/cancel changes.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-frontend-profile-data-flow-so-it-no-longer-uses-role-based-placeholder-profile-values-replace-the-workaround-in-the-profile-hook-with-a-real-fetch-of-the-backend-user-profile-and-implement-a-working-mutation-for-saving-profile-edits-with-react-query-cache-invalidation",
      "title": "Fix the frontend profile data flow so it no longer uses role-based placeholder profile values. Replace the workaround in the profile hook with a real fetch of the backend user profile, and implement a working mutation for saving profile edits with React Query cache invalidation.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-restore-a-functional-claim-first-admin-flow-ensure-the-ui-can-reliably-determine-whether-admin-can-be-claimed-show-the-claim-action-when-appropriate-and-successfully-claim-admin-so-the-admin-navigation-entry-appears-immediately-all-user-facing-text-must-be-in-english",
      "title": "Restore a functional “claim first admin” flow: ensure the UI can reliably determine whether admin can be claimed, show the claim action when appropriate, and successfully claim admin so the Admin navigation entry appears immediately. All user-facing text must be in English.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-allowlisted-principal-id-dcama-lvxhu-qf6zb-u75wm-yapdd-dosl4-b3rvi-pxrax-sznjy-3yq47-bae-is-treated-as-an-admin-immediately-after-sign-in-so-the-admin-navigation-entry-appears-and-admin-routes-are-accessible-for-this-principal",
      "title": "Ensure the allowlisted Principal ID `dcama-lvxhu-qf6zb-u75wm-yapdd-dosl4-b3rvi-pxrax-sznjy-3yq47-bae` is treated as an admin immediately after sign-in, so the Admin navigation entry appears and admin routes are accessible for this Principal.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-frontend-admin-status-data-flow-so-useiscalleradmin-accurately-reflects-backend-admin-status-including-the-allowlist-admin-and-updates-the-ui-reliably-after-authentication-and-after-any-admin-claim-action",
      "title": "Fix the frontend admin-status data flow so `useIsCallerAdmin()` accurately reflects backend admin status (including the allowlist admin) and updates the UI reliably after authentication and after any admin-claim action.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-placeholder-profile-hook-implementation-so-the-app-fetches-the-real-stored-profile-from-the-backend-and-can-persist-profile-edits-full-name-optional-email-city-country",
      "title": "Replace the placeholder Profile hook implementation so the app fetches the real stored profile from the backend and can persist profile edits (full name, optional email, city, country).",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-page-to-provide-an-editable-form-for-full-name-email-city-and-country-with-clear-english-user-facing-text-and-save-cancel-actions",
      "title": "Update the Profile page to provide an editable form for full name, email, city, and country, with clear English user-facing text and Save/Cancel actions.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-frontend-caller-profile-data-flow-to-stop-using-role-based-placeholder-profile-values-and-instead-fetch-the-real-stored-profile-from-the-backend-so-signed-in-users-reliably-see-usable-app-features-vehicles-lost-vehicles-notifications-security-settings-and-are-only-redirected-to-onboarding-when-the-backend-definitively-reports-that-no-onboarded-profile-exists",
      "title": "Fix the frontend caller-profile data flow to stop using role-based placeholder profile values and instead fetch the real stored profile from the backend, so signed-in users reliably see usable app features (vehicles, lost vehicles, notifications, security settings) and are only redirected to onboarding when the backend definitively reports that no onboarded profile exists.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-allowlisted-principal-id-dcama-lvxhu-qf6zb-u75wm-yapdd-dosl4-b3rvi-pxrax-sznjy-3yq47-bae-is-recognized-as-an-admin-immediately-after-sign-in-without-requiring-a-separate-onboarding-claim-step-and-that-the-frontend-admin-status-hook-reflects-this-reliably-so-the-admin-navigation-entry-appears-and-admin-routes-are-accessible",
      "title": "Ensure the allowlisted Principal ID `dcama-lvxhu-qf6zb-u75wm-yapdd-dosl4-b3rvi-pxrax-sznjy-3yq47-bae` is recognized as an admin immediately after sign-in (without requiring a separate onboarding/claim step) and that the frontend admin-status hook reflects this reliably so the Admin navigation entry appears and /admin routes are accessible.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-resolve-the-browser-console-error-about-invalid-failed-pwa-icon-downloads-by-ensuring-the-manifest-and-html-icon-links-point-to-real-valid-png-assets-available-at-runtime-and-that-those-files-exist-in-the-frontend-public-assets",
      "title": "Resolve the browser console error about invalid/failed PWA icon downloads by ensuring the manifest and HTML icon links point to real, valid PNG assets available at runtime, and that those files exist in the frontend public assets.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-bootstrap-error-screen-to-use-english-only-user-facing-copy-titles-descriptions-button-labels-helper-text-and-keep-showing-the-raw-technical-error-message-in-a-clearly-labeled-section",
      "title": "Update the profile bootstrap error screen to use English-only user-facing copy (titles, descriptions, button labels, helper text) and keep showing the raw technical error message in a clearly labeled section.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-detect-the-specific-replica-rejection-case-shown-in-the-screenshot-where-the-backend-canister-is-stopped-e-g-error-contains-is-stopped-and-or-ic0508-and-or-callcontextmanager-and-display-a-dedicated-actionable-recovery-message-instead-of-generic-causes",
      "title": "Detect the specific replica rejection case shown in the screenshot where the backend canister is stopped (e.g., error contains \"is stopped\" and/or \"IC0508\" and/or \"CallContextManager\") and display a dedicated, actionable recovery message instead of generic causes.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-copy-error-details-action-on-the-bootstrap-error-screen-that-copies-a-formatted-block-containing-at-minimum-the-visible-error-message-text-the-current-url-and-a-timestamp-so-the-user-can-paste-it-to-the-caffeine-team-when-build-deploy-is-locked",
      "title": "Add a “Copy error details” action on the bootstrap error screen that copies a formatted block containing (at minimum) the visible error message text, the current URL, and a timestamp, so the user can paste it to the Caffeine team when Build/Deploy is locked.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-eliminate-the-recurring-console-warning-about-passing-both-agent-and-agentoptions-when-creating-the-backend-actor-by-updating-the-actor-creation-configuration-so-only-one-is-provided-consistently-and-verify-that-authenticated-actor-creation-uses-the-internet-identity-identity-correctly",
      "title": "Eliminate the recurring console warning about passing both `agent` and `agentOptions` when creating the backend actor by updating the actor-creation configuration so only one is provided consistently, and verify that authenticated actor creation uses the Internet Identity identity correctly.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-the-app-from-getting-stuck-on-the-global-loading-screen-by-making-actor-initialization-resilient-if-actor-creation-and-or-initializeaccesscontrolwithsecret-fails-or-rejects-the-ui-must-exit-the-spinner-state-and-display-a-recoverable-error-screen-with-an-english-retry-action",
      "title": "Prevent the app from getting stuck on the global \"Loading...\" screen by making actor initialization resilient: if actor creation and/or `_initializeAccessControlWithSecret(...)` fails or rejects, the UI must exit the spinner state and display a recoverable error screen with an English retry action.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-initializeaccesscontrolwithsecret-admintoken-cannot-trap-the-app-during-startup-when-the-url-parameter-caffeineadmintoken-is-missing-empty-invalid-backend-and-frontend-must-handle-this-case-gracefully-so-normal-users-can-still-load-the-app-and-proceed-to-onboarding-profile-flows",
      "title": "Ensure `_initializeAccessControlWithSecret(adminToken)` cannot trap the app during startup when the URL parameter `caffeineAdminToken` is missing/empty/invalid; backend and frontend must handle this case gracefully so normal users can still load the app and proceed to onboarding/profile flows.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-pwa-icon-loading-failures-by-ensuring-the-icon-urls-referenced-by-frontend-index-html-and-frontend-public-manifest-webmanifest-point-to-real-valid-png-files-available-at-runtime-and-ensure-those-assets-are-served-correctly-so-the-browser-does-not-report-resource-isn-t-a-valid-image",
      "title": "Fix PWA icon loading failures by ensuring the icon URLs referenced by `frontend/index.html` and `frontend/public/manifest.webmanifest` point to real, valid PNG files available at runtime, and ensure those assets are served correctly so the browser does not report \"resource isn't a valid image\".",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-app-never-renders-as-a-blank-dark-screen-on-initial-load-when-the-user-is-not-authenticated-the-ui-must-reliably-render-the-sign-in-screen-with-a-visible-sign-in-with-internet-identity-button-instead-of-a-blank-page",
      "title": "Ensure the app never renders as a blank/dark screen on initial load: when the user is not authenticated, the UI must reliably render the Sign In screen (with a visible ‘Sign in with Internet Identity’ button) instead of a blank page.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-actor-bootstrap-error-detection-and-reporting-so-startup-failures-do-not-result-in-an-unrecoverable-blank-dark-screen-the-startup-bootstrap-error-screen-must-appear-when-actor-creation-or-access-control-initialization-fails-and-it-must-offer-a-working-retry-action",
      "title": "Fix actor bootstrap error detection and reporting so startup failures do not result in an unrecoverable blank/dark screen. The startup bootstrap error screen must appear when actor creation or access-control initialization fails, and it must offer a working Retry action.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-the-service-worker-caching-strategy-to-prevent-stale-cached-app-shells-from-causing-a-blank-screen-after-a-new-deploy-do-not-cache-the-html-shell-in-a-way-that-can-serve-outdated-js-bundles-after-an-update-ensure-a-new-deploy-reliably-loads-the-latest-frontend-assets",
      "title": "Harden the Service Worker caching strategy to prevent stale cached app shells from causing a blank screen after a new deploy. Do not cache the HTML shell in a way that can serve outdated JS bundles after an update; ensure a new deploy reliably loads the latest frontend assets.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-top-level-recoverable-fallback-ui-for-unexpected-initialization-render-errors-e-g-router-render-exceptions-that-includes-english-only-user-facing-text-and-a-reload-app-action",
      "title": "Add a top-level recoverable fallback UI for unexpected initialization/render errors (e.g., router/render exceptions) that includes English-only user-facing text and a ‘Reload app’ action.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-trigger-a-rebuild-and-redeploy-of-the-existing-application-no-functional-changes-required-to-restart-the-backend-canister-that-is-currently-stopped-and-causing-replica-rejection-errors-ic0508-during-startup",
      "title": "Trigger a rebuild and redeploy of the existing application (no functional changes required) to restart the backend canister that is currently stopped and causing replica rejection errors (IC0508) during startup.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-after-redeploy-verify-that-the-startup-retry-flow-remains-functional-when-a-connection-error-occurs-the-retry-connection-action-must-attempt-actor-initialization-again-and-must-not-leave-the-ui-stuck-on-a-loading-spinner-indefinitely",
      "title": "After redeploy, verify that the startup retry flow remains functional: when a connection error occurs, the 'Retry Connection' action must attempt actor initialization again and must not leave the UI stuck on a loading spinner indefinitely.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Autentikasi pengguna berbasis Principal ID (Internet Identity) dan profil pengguna (nama, email, kota, negara)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Registrasi kendaraan (mobil/motor) dengan data: no mesin, no rangka, merek, tipe, tahun, lokasi, foto kendaraan",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Pelepasan/transfer kepemilikan kendaraan saat hendak dijual dengan verifikasi PIN",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Sistem pengguna berbayar dengan Token Undangan (link registrasi) yang dibuat admin dan hanya sekali pakai",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Dashboard/admin report untuk memantau token undangan (sudah dipakai/belum) dan statistik jumlah kendaraan terdaftar",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Fitur laporan kendaraan hilang (berdasarkan identitas kendaraan seperti nomor mesin) yang terlihat oleh semua pengguna untuk mencegah jual-beli kendaraan curian",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Fitur laporan kendaraan ditemukan dan notifikasi ke pemilik kendaraan",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Menampilkan/memasukkan logo aplikasi ke dalam UI aplikasi",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Admin dapat generate Token Undangan dan melihat tabel daftar token (belum dipakai/sudah dipakai)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Tambahkan halaman “Tentang Aplikasi” berisi deskripsi dan kontak admin (WA 089502436075, Email: pasardigital.ina@gmail.com)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Buat aplikasi responsif untuk laptop/handphone dan dukung PWA installable di Android & iOS",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Tampilkan logo saat aplikasi pertama kali dibuka (splash/landing) dan di dalam aplikasi (header/area utama)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Add a one-time \"first admin\" bootstrap mechanism so the currently signed-in Principal can become an admin when no admin has been configured yet, and ensure admin status checks reflect this immediately after the bootstrap action.",
      "reqIds": [
        "REQ-18"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Tampilkan Principal ID (Internet Identity) pengguna di halaman Profil sebagai teks read-only agar pengguna tahu Internet ID-nya",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Tambahkan tombol Logout di halaman Profil Pengguna",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Reset/tambahkan ulang flow klaim 'first admin' agar pengguna bisa klaim admin saat ini dan menu Admin/Dashboard muncul",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Perbaiki halaman Profil agar bisa diedit (tampilkan tombol/form Edit/Update Profile dan pastikan bisa menyimpan perubahan)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Tetapkan Principal ID dcama-lvxhu-qf6zb-u75wm-yapdd-dosl4-b3rvi-pxrax-sznjy-3yq47-bae sebagai admin permanen (allowlist) agar menu/dashboard Admin selalu muncul",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Add backend APIs to fetch and update the signed-in caller’s user profile so the frontend can display real stored profile data (not placeholder values) and persist profile edits after onboarding.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Permanently grant admin access to Principal ID `dcama-lvxhu-qf6zb-u75wm-yapdd-dosl4-b3rvi-pxrax-sznjy-3yq47-bae` via a backend allowlist rule, and ensure all admin checks and admin-gated backend endpoints treat this Principal as admin immediately after sign-in.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Expose explicit backend Candid methods for reading and updating the signed-in caller’s user profile (e.g., getCallerUserProfile and save/update equivalent) so the generated TypeScript actor interface includes them and the frontend can call them without workarounds.",
      "reqIds": [
        "REQ-40"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Eliminate the recurring console warning about passing both `agent` and `agentOptions` when creating the backend actor by adjusting the actor creation configuration so only one of these is provided consistently.",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Pasar Digital Community",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}